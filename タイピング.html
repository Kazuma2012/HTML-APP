
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ã‚¿ã‚¤ãƒ”ãƒ³ã‚°</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #222;
      color: #fff;
      text-align: center;
      padding-top: 50px;
      overflow: hidden;
      transition: background-color 0.3s;
    }
    #word {
      font-size: 48px;
      margin: 20px;
    }
    #romaji {
      font-size: 24px;
      margin-bottom: 10px;
      letter-spacing: 5px;
    }
    #romaji .typed {
      color: #555;
    }
    #romaji .untyped {
      color: lightgreen;
    }
    #input {
      font-size: 24px;
      padding: 10px;
      width: 300px;
    }
    #score, #high-score, #timer {
      font-size: 20px;
      margin-top: 10px;
    }
    #start-btn {
      margin-top: 20px;
      padding: 10px 30px;
      font-size: 20px;
      background-color: #00bcd4;
      color: white;
      border: none;
      cursor: pointer;
    }
    #start-btn:hover {
      background-color: #0097a7;
    }

    /* ğŸ”½ è¿½åŠ éƒ¨åˆ†ï¼šå³ä¸Šå›ºå®šãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã¨ãƒ¢ãƒ¼ãƒ€ãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ« */

    #reset-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      padding: 8px 16px;
      font-size: 14px;
      background-color: #f44336;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 6px;
    }
    #reset-btn:hover {
      background-color: #d32f2f;
    }

    #modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.7);
      justify-content: center;
      align-items: center;
      z-index: 999;
    }

    .modal-content {
      background: #333;
      color: #fff;
      padding: 30px;
      border-radius: 10px;
      text-align: center;
      width: 300px;
    }

    .modal-buttons {
      margin-top: 20px;
      display: flex;
      justify-content: space-between;
    }

    .modal-buttons button {
      padding: 8px 16px;
      font-size: 14px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .cancel-btn {
      background-color: #777;
      color: white;
    }
    .cancel-btn:hover {
      background-color: #555;
    }

    .confirm-btn {
      background-color: #f44336;
      color: white;
    }
    .confirm-btn:hover {
      background-color: #d32f2f;
    }
  </style>
</head>
<body>
  <h1>ã‚¿ã‚¤ãƒ”ãƒ³ã‚°</h1>

  <!-- ğŸ”½ å³ä¸Šã«é…ç½®ã•ã‚ŒãŸãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ -->
  <button id="reset-btn">æœ€é«˜è¨˜éŒ²ãƒªã‚»ãƒƒãƒˆ</button>

  <div id="word">ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­ï¼</div>
  <div id="romaji"></div>
  <input type="text" id="input" disabled placeholder="ã“ã“ã«1æ–‡å­—ãšã¤å…¥åŠ›ï¼" autocomplete="off" />
  <div id="score">ã‚¹ã‚³ã‚¢: 0</div>
  <div id="high-score">æœ€é«˜è¨˜éŒ²: 0</div>
  <div id="timer">60ç§’</div>
  <button id="start-btn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>

  <!-- ğŸ”½ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼ˆåˆæœŸã¯éè¡¨ç¤ºï¼‰ -->
  <div id="modal">
    <div class="modal-content">
      <p>æœ¬å½“ã«æœ€é«˜è¨˜éŒ²ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ</p>
      <div class="modal-buttons">
        <button class="cancel-btn" id="cancel-reset">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button class="confirm-btn" id="confirm-reset">ãƒªã‚»ãƒƒãƒˆ</button>
      </div>
    </div>
  </div>

  <script>
      const words = [
  { word: "ã“ã‚“ã«ã¡ã¯", romaji: "konnitiha" },
  { word: "ã‚ã‚ŠãŒã¨ã†", romaji: "arigatou" },
  { word: "ã•ã‚ˆã†ãªã‚‰", romaji: "sayounara" },
  { word: "ã™ã—", romaji: "susi" },
  { word: "ã­ã“", romaji: "neko" },
  { word: "ãŒã£ã“ã†", romaji: "gakkou" },
  { word: "ã¦ã‚“ã", romaji: "tenki" },
  { word: "ã§ã‚“ã—ã‚ƒ", romaji: "densya" },
  { word: "ã¨ã‚‚ã ã¡", romaji: "tomodati" },
  { word: "ã‚ã•ã”ã¯ã‚“", romaji: "asagohan" },
  { word: "çµŒæ¸ˆ", romaji: "keizai" },
  { word: "å“²å­¦", romaji: "tetugaku" },
  { word: "ç’°å¢ƒå•é¡Œ", romaji: "kankyomondai" },
  { word: "æƒ…å ±æŠ€è¡“", romaji: "jouhougijutu" },
  { word: "äººå·¥çŸ¥èƒ½", romaji: "zinkoutinou" },
  { word: "å›½éš›é–¢ä¿‚", romaji: "kokusaikankei" },
  { word: "æŒç¶šå¯èƒ½", romaji: "jizokukanou" },
  { word: "å¤šæ§˜æ€§", romaji: "tayousei" },
  { word: "è²¬ä»»æ„Ÿ", romaji: "sekininkan" },
  { word: "å‰µé€ åŠ›", romaji: "souzouryoku" },
  { word: "ç‹¬ç«‹å¿ƒ", romaji: "dokuritusin" },
  { word: "å”èª¿æ€§", romaji: "kyoutyousei" },
  { word: "è«–ç†çš„æ€è€ƒ", romaji: "ronritekisikou" },
  { word: "è¦³å¯ŸåŠ›", romaji: "kansatsuryoku" },
  { word: "è‡ªå·±ç®¡ç†", romaji: "zikokanri" },
  { word: "ç›®æ¨™è¨­å®š", romaji: "mokuhyousettei" },
  { word: "æ™‚é–“å‰²", romaji: "jikanwari" },
  { word: "æ­´å²çš„èƒŒæ™¯", romaji: "rekisitekihaikei" },
  { word: "å› æœé–¢ä¿‚", romaji: "ingakankei" },
  { word: "åœ°çƒæ¸©æš–åŒ–", romaji: "tikyuondanka" },
  { word: "æ–‡åŒ–äº¤æµ", romaji: "bunkakouryuu" },
  { word: "äºˆæ¸¬ä¸èƒ½", romaji: "yosokuhunou" },
  { word: "è¦–é‡æ‹¡å¤§", romaji: "siyakakudai" },
  { word: "åˆ†æèƒ½åŠ›", romaji: "bunsekiryoku" },
  { word: "å­¦ç¿’æ„æ¬²", romaji: "gakusuiyoku" },
  { word: "å€«ç†è¦³", romaji: "rinrikan" },
  { word: "å¤šå›½ç±ä¼æ¥­", romaji: "takokusekikigyou" },
  { word: "ç¿»è¨³æŠ€è¡“", romaji: "honyakugijutu" },
  { word: "å¿ƒç†çš„å½±éŸ¿", romaji: "sinritekieikyou" },
  { word: "äººå·¥è¡›æ˜Ÿ", romaji: "zinkoueisei" },
  { word: "ãŠé‡‘ã‚‚ã¡", romaji: "okanemoti" },
  { word: "å¿ƒã®ä¸­", romaji: "kokorononaka" },
  { word: "æœªæ¥ã¸ã®ã‚†ã‚", romaji: "miraihenoyume" },
  { word: "å°ã•ãªã—ã‚ã‚ã›", romaji: "tiisanasiawase" },
  { word: "ãµã—ããªåŠ›", romaji: "husiginatikara" },
  { word: "æ™‚é–“ã®ä½¿ã„æ–¹", romaji: "jikannotsukaikata" },
  { word: "æ¯æ—¥ã®ç”Ÿæ´»", romaji: "mainitinosikatu" },
  { word: "æœã®å…‰", romaji: "asanohikari" },
  { word: "å­¦ã³ã®é“", romaji: "manabinomiti" },
  { word: "ã‚„ã•ã—ã„è¨€è‘‰", romaji: "yasasiikotoba" },
  { word: "æ­£ã—ã„åˆ¤æ–­", romaji: "tadasiihandan" },
  { word: "ã²ã¨ã¤ã®é¸æŠ", romaji: "hitotunosentaku" },
  { word: "å‰å‘ããªå¿ƒ", romaji: "maemukinakokoro" },
  { word: "åŠªåŠ›ã®ã‚ã—ã‚ã¨", romaji: "doryokunoasiato" },
  { word: "æˆé•·ã™ã‚‹è‡ªåˆ†", romaji: "seityousurujibun" },
  { word: "ã„ã®ã¡ã®å¤§åˆ‡ã•", romaji: "inotinotaisetusa" },
  { word: "å®¶æ—ã®ã¬ãã‚‚ã‚Š", romaji: "kazokunonukumori" },
  { word: "ç›®ã«è¦‹ãˆãªã„åŠ›", romaji: "meninienaitikara" },
  { word: "è‡ªç„¶ã¨ã¨ã‚‚ã«", romaji: "sizentotomoni" },
  { word: "ä»Šæ—¥ã¨ã„ã†ä¸€æ—¥", romaji: "kyoutoiuitiniti" },
  { word: "å¤¢ã«ã‚€ã‹ã£ã¦", romaji: "yumenimukatte" },
  { word: "æœ¬å½“ã®æ°—æŒã¡", romaji: "hontounokimoti" },
  { word: "ã‚ãã‚‰ã‚ãªã„å¿ƒ", romaji: "akiramenaikokoro" },
  { word: "è¦‹ãˆãªã„æœªæ¥", romaji: "mienaimirai" },
  { word: "å¸Œæœ›ã®å…‰", romaji: "kibounohikari" },
  { word: "é™ã‹ãªå¤œ", romaji: "sizukanayoru" },
  { word: "ä¿¡ã˜ã‚‹åŠ›", romaji: "sinzirutikara" },
  { word: "åºƒã„ä¸–ç•Œ", romaji: "hiroisekai" },
  { word: "ãªã¿ã ã®ç†ç”±", romaji: "namidanoriyuu" },
  { word: "å¿ƒã®ãƒ¡ãƒ­ãƒ‡ã‚£ãƒ¼", romaji: "kokoronomerodii" },
  { word: "é™ã‘ã•ã®ä¸­", romaji: "sizukesanonaka" },
  { word: "ä¿¡ã˜ãŸã„æ°—æŒã¡", romaji: "sinzitaikimoti" },
  { word: "å¿ƒã‚’ã¤ãªã", romaji: "kokorowotunagu" },
  { word: "æœæ—¥ã®ã¬ãã‚‚ã‚Š", romaji: "asahinonukumori" },
  { word: "éãå»ã£ãŸæ™‚é–“", romaji: "sugisattajikan" },
  { word: "ç¬‘é¡”ã®ç†ç”±", romaji: "egaonoriyuu" },
  { word: "æœªæ¥ã¸ã®ä¸€æ­©", romaji: "miraihenoippo" },
  { word: "é¢¨ã®ã•ã•ã‚„ã", romaji: "kazenosasayaki" },
  { word: "ã‚†ã‚ã®ç¶šã", romaji: "yumenotuzuki" },
  { word: "ãµãŸã‚Šã®ç´„æŸ", romaji: "hutarinoyakusoku" },
  { word: "æ¶™ãŒã“ã¼ã‚Œã‚‹", romaji: "namidagakoboreru" },
  { word: "ç›®ã‚’ã¨ã˜ã‚Œã°", romaji: "mewotojireba" },
  { word: "å¿ƒã«ã²ã³ã", romaji: "kokoronihibiku" },
  { word: "æ¶ˆãˆãªã„æ€ã„å‡º", romaji: "kienaiomoide" },
  { word: "ã‚†ã‚Œã‚‹æ°—æŒã¡", romaji: "yurerukimoti" },
  { word: "çµ‚ã‚ã‚‰ãªã„ç‰©èª", romaji: "owaranaimonogatari" },
  { word: "ã ã‚Œã‹ã®ãŸã‚ã«", romaji: "darekanotameni" },
  { word: "é ãã®ç©º", romaji: "tookunosora" },
  { word: "è¿·ã„ã®ä¸­ã§", romaji: "mayoinonakade" },
  { word: "ãµã‚Šã‹ãˆã£ãŸé“", romaji: "hurikaettamiti" },
  { word: "æ·±ã„çœ ã‚Š", romaji: "hukainemuri" },
  { word: "å…‰ã¨å½±", romaji: "hikaritokage" },
  { word: "ãã£ã¨æ‰‹ã‚’ã«ãã‚‹", romaji: "sottotewonigiru" },
  { word: "é¡˜ã„ã‚’ã“ã‚ã¦", romaji: "negaiwokomete" },
  { word: "å¤§åˆ‡ãªæ™‚é–“", romaji: "taisetunajikan" },
  { word: "æ­©ã¿ç¶šã‘ã‚‹", romaji: "ayumitudukeru" },
  { word: "å¿ƒã®å®ç‰©", romaji: "kokoronotakaramono" },
  { word: "ã¯ã˜ã¾ã‚Šã®æœ", romaji: "hazimarinoasa" }
];


    let score = 0;
    let highScore = localStorage.getItem("highScore") || 0;
    let currentWord = "";
    let currentRomaji = "";
    let inputIndex = 0;
    let timer = 60;
    let timerInterval;
    let usedWords = [];

    const wordElement = document.getElementById("word");
    const romajiElement = document.getElementById("romaji");
    const inputElement = document.getElementById("input");
    const scoreElement = document.getElementById("score");
    const highScoreElement = document.getElementById("high-score");
    const timerElement = document.getElementById("timer");
    const startBtn = document.getElementById("start-btn");

    // ğŸ”½ ãƒ¢ãƒ¼ãƒ€ãƒ«å‡¦ç†ã«å¿…è¦ãªè¦ç´ ã‚’å–å¾—
    const resetBtn = document.getElementById("reset-btn");
    const modal = document.getElementById("modal");
    const cancelReset = document.getElementById("cancel-reset");
    const confirmReset = document.getElementById("confirm-reset");

    resetBtn.addEventListener("click", () => {
      modal.style.display = "flex";
    });

    cancelReset.addEventListener("click", () => {
      modal.style.display = "none";
    });

    confirmReset.addEventListener("click", () => {
      localStorage.removeItem("highScore");
      highScore = 0;
      highScoreElement.textContent = `æœ€é«˜è¨˜éŒ²: 0`;
      modal.style.display = "none";
      alert("æœ€é«˜è¨˜éŒ²ã‚’ãƒªã‚»ãƒƒãƒˆã—ãŸã‚ˆï¼ğŸ§¼âœ¨");
    });

    function getRandomWord() {
      const unused = words.filter(w => !usedWords.includes(w.word));
      if (unused.length === 0) {
        clearInterval(timerInterval);
        alert("ã™ã¹ã¦ã®è¨€è‘‰ã‚’ã‚¯ãƒªã‚¢ã—ãŸã‚ˆï¼ğŸ’ª");
        inputElement.disabled = true;
        return { word: "å®Œå…¨å‹åˆ©ï¼", romaji: "" };
      }
      const index = Math.floor(Math.random() * unused.length);
      const word = unused[index];
      usedWords.push(word.word);
      return word;
    }

    function displayWord() {
      const wordObj = getRandomWord();
      currentWord = wordObj.word;
      currentRomaji = wordObj.romaji;
      inputIndex = 0;
      wordElement.textContent = currentWord;
      updateRomajiDisplay();
    }

    function updateRomajiDisplay() {
      romajiElement.innerHTML = "ãƒ­ãƒ¼ãƒå­—: ";
      for (let i = 0; i < currentRomaji.length; i++) {
        const span = document.createElement("span");
        span.textContent = currentRomaji[i];
        span.className = i < inputIndex ? "typed" : "untyped";
        romajiElement.appendChild(span);
      }
    }

    function updateTimer() {
      timer--;
      timerElement.textContent = `${timer}ç§’`;
      if (timer <= 0) {
        clearInterval(timerInterval);
        inputElement.disabled = true;
        if (score > highScore) {
          highScore = score;
          localStorage.setItem("highScore", highScore);
        }
        highScoreElement.textContent = `æœ€é«˜è¨˜éŒ²: ${highScore}`;
        alert(`æ™‚é–“åˆ‡ã‚Œï¼ã‚¹ã‚³ã‚¢ã¯ ${score} ç‚¹ã ã£ãŸã‚ˆï¼ğŸ‰`);
      }
    }

    function startGame() {
      score = 0;
      timer = 60;
      usedWords = [];
      scoreElement.textContent = "ã‚¹ã‚³ã‚¢: 0";
      highScoreElement.textContent = `æœ€é«˜è¨˜éŒ²: ${highScore}`;
      timerElement.textContent = `${timer}ç§’`;
      inputElement.disabled = false;
      inputElement.value = "";
      inputElement.focus();
      displayWord();
      clearInterval(timerInterval);
      timerInterval = setInterval(updateTimer, 1000);
    }

    function startCountdownAndGame() {
      let count = 3;
      wordElement.textContent = `${count}`;
      romajiElement.textContent = "";
      inputElement.disabled = true;
      const countdown = setInterval(() => {
        count--;
        if (count > 0) {
          wordElement.textContent = `${count}`;
        } else {
          clearInterval(countdown);
          startGame();
        }
      }, 1000);
    }

    inputElement.addEventListener("input", () => {
      const val = inputElement.value.trim().toLowerCase();
      const expectedChar = currentRomaji[inputIndex];
      if (val === expectedChar) {
        inputIndex++;
        score++;
        scoreElement.textContent = `ã‚¹ã‚³ã‚¢: ${score}`;
        updateRomajiDisplay();
        inputElement.value = "";
        if (inputIndex === currentRomaji.length) {
          displayWord();
        }
      } else {
        document.body.style.backgroundColor = "#ff4444";
        setTimeout(() => {
          document.body.style.backgroundColor = "#222";
        }, 150);
        inputElement.value = "";
      }
    });

    startBtn.addEventListener("click", startCountdownAndGame);

    document.addEventListener("keydown", e => {
      if (e.code === "Space") {
        e.preventDefault();
        startCountdownAndGame();
      }
    });

    wordElement.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­ï¼";
    romajiElement.textContent = "";
    highScoreElement.textContent = `æœ€é«˜è¨˜éŒ²: ${highScore}`;
  </script>
</body>
</html>
